import{o as n,c as w,k as l,i as M,j,d as E,a as y,b as G,e as r,f as e,u as s,w as _,v as b,F as S,g as $,l as d,G as T,Q as N,m as D,V as F,N as I,U as O,W as P,$ as q,n as z,p as Q,Y as R,q as V,t as W,h as v,s as p,x as Y}from"./index.55b93d80.js";import{U as H}from"./concepto.f0f3421d.js";import{r as J}from"./SearchIcon.357c8dd3.js";function K(i,c){return n(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}function X(i,c){return n(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})])}const Z=M("programa",{state:()=>({programas:[]}),getters:{filter_programas_by_nombre:i=>c=>i.programas.filter(u=>u.is_active&&u.nombre.toLowerCase().includes(c.toLowerCase())),find_programa_by_id:i=>c=>i.programas.find(u=>u.id===c)},actions:{async set_programas(){try{const{data:i}=await j.get("academicos/programa/");this.programas=i}catch{return null}}}}),ee={class:"bg-white shadow"},te={class:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"},oe={class:"py-6 md:flex md:items-center md:justify-between lg:border-t lg:border-gray-200"},se={class:"flex-1 min-w-0"},ae={class:"flex-1 flex"},ne={class:"w-full flex md:ml-0",action:"#",method:"GET"},le=e("label",{for:"search-field",class:"sr-only"},"Buscar",-1),re={class:"relative w-full text-gray-400 focus-within:text-gray-600"},ie={class:"absolute inset-y-0 left-0 flex items-center pointer-events-none","aria-hidden":"true"},de={class:"mt-6 flex space-x-3 md:mt-0 md:ml-4"},ce=e("button",{type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500"}," Send money ",-1),ue={class:"mt-8"},me=e("h2",{class:"max-w-6xl mx-auto mt-8 px-4 text-lg leading-6 font-medium text-gray-900 sm:px-6 lg:px-8"}," Listado de conceptos ",-1),pe={class:"hidden sm:block"},fe={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},ge={class:"flex flex-col mt-2"},xe={class:"align-middle min-w-full overflow-x-auto shadow overflow-hidden sm:rounded-lg"},ye={class:"min-w-full divide-y divide-gray-200"},_e=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," C\xF3digo "),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Concepto "),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Importe "),e("th",{class:"hidden px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider md:block"}," Estado "),e("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Opciones ")])],-1),ve={key:0},he=e("div",{class:"flex item-center text-center justify-center w-full p-5 text-gray-500"}," No se encontraron Datos! ",-1),be=[he],we={key:1,class:"bg-white divide-y divide-gray-200"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},Se={class:"px-6 py-4 text-left whitespace-nowrap text-sm text-gray-500"},Ve={class:"hidden px-6 py-4 whitespace-nowrap text-sm text-gray-500 md:block"},Ue={class:"px-6 py-4 text-left whitespace-nowrap text-sm text-gray-500 font-medium space-x-1"},Be=["onClick"],$e=V(" Editar "),Ne=e("span",{class:"sr-only"},null,-1),ze=[$e,Ne],Ae={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Le=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1),Me={class:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},je={action:"#",method:"POST"},Ee={class:"shadow sm:rounded-md sm:overflow-hidden"},Ge={class:"bg-white py-6 px-4 space-y-6 sm:p-6"},Te={class:"text-lg leading-6 font-medium text-gray-900"},De={key:0},Fe={key:1},Ie=V(" concepto "),Oe=e("p",{class:"mt-1 text-sm text-gray-500"}," POSTGRADO-UNAP ",-1),Pe={class:"grid grid-cols-6 gap-6"},qe={class:"col-span-6 sm:col-span-3"},Qe=e("label",{for:"codigo-pago",class:"block text-sm font-medium text-gray-700"},"C\xF3digo de banco",-1),Re=V(" Asignar programa "),We={class:"relative mt-1"},Ye={class:"flex"},He={class:"col-span-6"},Je=e("label",{for:"concepto",class:"block text-sm font-medium text-gray-700"},"Concepto",-1),Ke={class:"col-span-6 sm:col-span-3"},Xe=e("label",{for:"costo",class:"block text-sm font-medium text-gray-700"},"Costo",-1),Ze={class:"col-span-6 sm:col-span-3"},et=e("label",{for:"country",class:"block text-sm font-medium text-gray-700"},"Estado",-1),tt=e("option",{value:"true"}," Activo ",-1),ot=e("option",{value:"false"}," Inactivo ",-1),st=[tt,ot],at={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},it=E({setup(i){const c={activo:"bg-green-100 text-green-800",processing:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800"},u=y(""),f=y(!1),k=y(""),m=H(),h=Z(),g=y({}),a=y({id:0,codigo:"",nombre:"",precio:0,is_active:!0,programa:0});G(()=>{m.set_conceptos(""),h.set_programas()});const U=async()=>{a.value={id:0,codigo:"",nombre:"",precio:0,is_active:!0,programa:0},f.value=!1},A=async()=>{g.value?a.value.programa=g.value.id:a.value.programa=0,await m.save_concepto(a.value),W("Concepto guardado",{type:"success",timeout:1e3}),m.set_conceptos(""),U()},L=async B=>{const t=await m.set_concepto_by_id(B);a.value.id=t.id,a.value.codigo=t.codigo,a.value.nombre=t.nombre,a.value.precio=t.precio,a.value.is_active=t.is_active,g.value=h.find_programa_by_id(t.programa)||{},f.value=!0};return(B,t)=>(n(),r(S,null,[e("div",ee,[e("div",te,[e("div",oe,[e("div",se,[e("div",ae,[e("form",ne,[le,e("div",re,[e("div",ie,[l(s(J),{class:"h-5 w-5","aria-hidden":"true"})]),_(e("input",{id:"search-field","onUpdate:modelValue":t[0]||(t[0]=o=>k.value=o),name:"search-field",class:"block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0 focus:border-transparent",placeholder:"Buscar conceptos",type:"search",onInput:t[1]||(t[1]=o=>s(m).set_conceptos(k.value))},null,544),[[b,k.value]])])])])]),e("div",de,[e("button",{type:"button",class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500",onClick:t[2]||(t[2]=o=>f.value=!0)}," Agregar concepto "),ce])])])]),e("div",ue,[me,e("div",pe,[e("div",fe,[e("div",ge,[e("div",xe,[e("table",ye,[_e,s(m).conceptos.length<=0?(n(),r("tbody",ve,be)):(n(),r("tbody",we,[(n(!0),r(S,null,$(s(m).conceptos,(o,x)=>(n(),r("tr",{key:x,class:"bg-white"},[e("td",ke,v(o.codigo),1),e("td",Ce,v(o.nombre),1),e("td",Se," S/ "+v(o.precio),1),e("td",Ve,[o.is_active?(n(),r("span",{key:0,class:p([c.activo,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},"Activo",2)):(n(),r("span",{key:1,class:p([c.failed,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},"Inactivo",2))]),e("td",Ue,[e("div",{class:"text-info underline cursor-pointer hover:text-cyan-700",onClick:C=>L(o.id)},ze,8,Be)])]))),128))]))])])])])])]),l(s(R),{as:"template",show:f.value},{default:d(()=>[l(s(T),{as:"div",class:"fixed z-10 inset-0 overflow-y-auto",onClose:t[11]||(t[11]=o=>f.value=!1)},{default:d(()=>[e("div",Ae,[l(s(N),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[l(s(D),{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})]),_:1}),Le,l(s(N),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:d(()=>[e("div",Me,[e("form",je,[e("div",Ee,[e("div",Ge,[e("div",null,[e("h3",Te,[a.value.id==0?(n(),r("span",De,"Nuevo")):(n(),r("span",Fe,"Modificar")),Ie]),Oe]),e("div",Pe,[e("div",qe,[Qe,_(e("input",{id:"codigo-pago","onUpdate:modelValue":t[3]||(t[3]=o=>a.value.codigo=o),type:"text",name:"codigo-pago",autocomplete:"off",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-info focus:border-info sm:text-sm"},null,512),[[b,a.value.codigo]])]),l(s(F),{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=o=>g.value=o),as:"div",class:"col-span-6"},{default:d(()=>[l(s(I),{class:"block text-sm font-medium text-gray-700"},{default:d(()=>[Re]),_:1}),e("div",We,[l(s(O),{class:"w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 shadow-sm focus:border-info focus:outline-none focus:ring-1 focus:ring-info sm:text-sm",autocomplete:"off","display-value":o=>o.nombre||"",onChange:t[4]||(t[4]=o=>u.value=o.target.value)},null,8,["display-value"]),l(s(P),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:d(()=>[l(s(X),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),s(h).filter_programas_by_nombre(u.value).length>0?(n(),w(s(q),{key:0,class:"absolute z-10 mt-1 max-h-28 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:d(()=>[(n(!0),r(S,null,$(s(h).filter_programas_by_nombre(u.value),o=>(n(),w(s(Y),{key:o.id,value:o,as:"template"},{default:d(({active:x,selected:C})=>[e("li",{class:p(["relative cursor-default select-none py-2 pl-3 pr-9",x?"bg-info text-white":"text-gray-900"])},[e("div",Ye,[e("span",{class:p(["truncate",C&&"font-semibold"])},v(o.nombre),3),e("span",{class:p(["ml-2 truncate text-gray-500",x?"text-indigo-200":"text-gray-500"])},v(o.codigo),3)]),C?(n(),r("span",{key:0,class:p(["absolute inset-y-0 right-0 flex items-center pr-4",x?"text-white":"text-info"])},[l(s(K),{class:"h-5 w-5","aria-hidden":"true"})],2)):z("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):z("",!0)])]),_:1},8,["modelValue"]),e("div",He,[Je,_(e("input",{id:"concepto","onUpdate:modelValue":t[6]||(t[6]=o=>a.value.nombre=o),type:"text",name:"concepto",autocomplete:"of",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-info focus:border-info sm:text-sm"},null,512),[[b,a.value.nombre]])]),e("div",Ke,[Xe,_(e("input",{id:"costo","onUpdate:modelValue":t[7]||(t[7]=o=>a.value.precio=o),type:"number",name:"costo",autocomplete:"of",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-info focus:border-info sm:text-sm"},null,512),[[b,a.value.precio]])]),e("div",Ze,[et,_(e("select",{id:"country","onUpdate:modelValue":t[8]||(t[8]=o=>a.value.is_active=o),name:"country",autocomplete:"of",class:"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-info focus:border-info sm:text-sm"},st,512),[[Q,a.value.is_active]])])])])])]),e("div",at,[e("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-info text-base font-medium text-white hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-info sm:ml-3 sm:w-auto sm:text-sm",onClick:t[9]||(t[9]=o=>A())}," Guardar "),e("button",{ref:"cancelButtonRef",type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-info sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:t[10]||(t[10]=o=>U())}," Cancelar ",512)])])]),_:1})])]),_:1})]),_:1},8,["show"])],64))}});export{it as default};
